<!doctype html>
<html class="docs-version-V2" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.15">
<title data-react-helmet="true">Proofs | Semaphore</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://semaphore.appliedzkp.org//docs/guides/proofs"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="V2"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-V2"><meta data-react-helmet="true" property="og:title" content="Proofs | Semaphore"><meta data-react-helmet="true" name="description" content="Learn how to use Semaphore to generate and verify zero-knowledge proofs."><meta data-react-helmet="true" property="og:description" content="Learn how to use Semaphore to generate and verify zero-knowledge proofs."><link data-react-helmet="true" rel="icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://semaphore.appliedzkp.org//docs/guides/proofs"><link data-react-helmet="true" rel="alternate" href="https://semaphore.appliedzkp.org//docs/guides/proofs" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://semaphore.appliedzkp.org//docs/guides/proofs" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.89283e7c.css">
<link rel="preload" href="/assets/js/runtime~main.b7f259fa.js" as="script">
<link rel="preload" href="/assets/js/main.173807db.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==e?t(e):window.matchMedia("(prefers-color-scheme: dark)").matches?t("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?t("light"):t("dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><div class="announcementBar_IbjG" style="background-color:#DAE0FF;color:#000000" role="banner"><div class="announcementBarPlaceholder_NC_W"></div><div class="announcementBarContent_KsVm"><b>The Semaphore V2 <a target="_blank" rel="noopener noreferrer" href="https://storage.googleapis.com/trustedsetup-a86f4.appspot.com/semaphore/semaphore_top_index.html">trusted-setup ceremony</a> ended successfully with more than 300 contributors! ðŸŽ‰</b></div><button type="button" class="clean-btn close announcementBarClose_FG1z" aria-label="Close"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/semaphore-logo.svg" alt="Semaphore Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/semaphore-logo.svg" alt="Semaphore Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div><div class="navbar__items navbar__items--right"><a href="https://semaphore.appliedzkp.org/whitepaper-v1.pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link V1_active V2 docs">Whitepaper</a><a class="navbar__item navbar__link persistent V2 docs" href="/docs/introduction">Documentation</a><a href="https://github.com/semaphore-protocol" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link persistent V2 docs"><span>Github<span style="margin-left:0.6rem;position:relative;top:1px"><svg class="custom-icon" width="13" height="13" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.85868 0.495117L5.85398 2.49512L10.4116 2.50578L0.808105 12.09L2.2209 13.5056L11.8507 3.89516L11.8399 8.50917L13.8399 8.51377L13.8587 0.513817L5.85868 0.495117Z"></path></svg></span></span></a><div class="toggle_Vdj9 toggle_TdHA toggleChecked_efXD toggleDisabled_VOAz"><div class="toggleTrack_a1Re" role="button" tabindex="-1"><div class="toggleTrackCheck_LppO"><span class="toggleIcon_kMo0"><svg class="custom-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.2256 2.00253C9.59172 1.94346 6.93894 2.9189 4.92893 4.92891C1.02369 8.83415 1.02369 15.1658 4.92893 19.071C8.83418 22.9763 15.1658 22.9763 19.0711 19.071C21.0811 17.061 22.0565 14.4082 21.9975 11.7743C21.9796 10.9772 21.8669 10.1818 21.6595 9.40643C21.0933 9.9488 20.5078 10.4276 19.9163 10.8425C18.5649 11.7906 17.1826 12.4053 15.9301 12.6837C14.0241 13.1072 12.7156 12.7156 12 12C11.2844 11.2844 10.8928 9.97588 11.3163 8.0699C11.5947 6.81738 12.2094 5.43511 13.1575 4.08368C13.5724 3.49221 14.0512 2.90664 14.5935 2.34046C13.8182 2.13305 13.0228 2.02041 12.2256 2.00253ZM17.6569 17.6568C18.9081 16.4056 19.6582 14.8431 19.9072 13.2186C16.3611 15.2643 12.638 15.4664 10.5858 13.4142C8.53361 11.362 8.73568 7.63895 10.7814 4.09281C9.1569 4.34184 7.59434 5.09193 6.34315 6.34313C3.21895 9.46732 3.21895 14.5326 6.34315 17.6568C9.46734 20.781 14.5327 20.781 17.6569 17.6568Z"></path></svg></span></div><div class="toggleTrackX_yM7u"><span class="toggleIcon_kMo0"><svg class="custom-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 18C10.4087 18 8.88258 17.3679 7.75736 16.2426C6.63214 15.1174 6 13.5913 6 12C6 10.4087 6.63214 8.88258 7.75736 7.75736C8.88258 6.63214 10.4087 6 12 6C13.5913 6 15.1174 6.63214 16.2426 7.75736C17.3679 8.88258 18 10.4087 18 12C18 13.5913 17.3679 15.1174 16.2426 16.2426C15.1174 17.3679 13.5913 18 12 18ZM12 16C13.0609 16 14.0783 15.5786 14.8284 14.8284C15.5786 14.0783 16 13.0609 16 12C16 10.9391 15.5786 9.92172 14.8284 9.17157C14.0783 8.42143 13.0609 8 12 8C10.9391 8 9.92172 8.42143 9.17157 9.17157C8.42143 9.92172 8 10.9391 8 12C8 13.0609 8.42143 14.0783 9.17157 14.8284C9.92172 15.5786 10.9391 16 12 16ZM11 1H13V4H11V1ZM11 20H13V23H11V20ZM3.515 4.929L4.929 3.515L7.05 5.636L5.636 7.05L3.515 4.93V4.929ZM16.95 18.364L18.364 16.95L20.485 19.071L19.071 20.485L16.95 18.364ZM19.071 3.514L20.485 4.929L18.364 7.05L16.95 5.636L19.071 3.515V3.514ZM5.636 16.95L7.05 18.364L4.929 20.485L3.515 19.071L5.636 16.95ZM23 11V13H20V11H23ZM4 11V13H1V11H4Z"></path></svg></span></div><div class="toggleTrackThumb_wQGH"></div></div><input type="checkbox" checked="" class="toggleScreenReader_xdqE" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_CW9Y"><nav class="menu thin-scrollbar menu_SkdO menuWithAnnouncementBar_x19h"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/introduction">What Is Semaphore?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/quick-setup">Quick setup</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_VCh3" aria-current="page" href="/docs/guides/identities">Guides</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/identities">Identities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/guides/groups">Groups</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/guides/proofs">Proofs</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/use-cases/private-voting">Use cases</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_VCh3" href="/docs/technical-reference/circuits">Technical reference</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/deployed-contracts">Deployed contracts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/subgraph">Subgraph</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/resources">Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/credits">Credits</a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><span class="theme-doc-version-badge badge badge--secondary">Version: <!-- -->V2</span><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Semaphore proofs</h1><p>Learn how to use Semaphore to generate and verify zero-knowledge proofs.</p><p>Once a user joins their <a href="/docs/glossary#semaphore-identity">Semaphore identity</a> to a <a href="/docs/glossary#semaphore-group">Semaphore group</a>, the user can signal anonymously with a zero-knowledge proof that proves the following:</p><ul><li>The user is a member of the group.</li><li>The same user created the signal and the proof.</li></ul><p>Developers can use Semaphore for the following:</p><ul><li><a href="#generate-a-proof-off-chain"><strong>Generate a proof off-chain</strong></a></li><li><a href="#verify-a-proof-off-chain"><strong>Verify a proof off-chain</strong></a></li><li><a href="#verify-a-proof-on-chain"><strong>Verify a proof on-chain</strong></a></li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="generate-a-proof-off-chain">Generate a proof off-chain<a class="hash-link" href="#generate-a-proof-off-chain" title="Direct link to heading">â€‹</a></h2><p>Use the <a href="https://github.com/semaphore-protocol/semaphore/tree/v2.6.1/packages/proof" target="_blank" rel="noopener noreferrer"><code>@semaphore-protocol/proof</code></a> library to generate an off-chain proof.
To generate a proof, pass the following properties to the <code>generateProof</code> function:</p><ul><li><code>identity</code>: The Semaphore identity of the user broadcasting the signal and generating the proof.</li><li><code>group</code>: The group to which the user belongs.</li><li><code>externalNullifier</code>: The value that prevents double-signaling.</li><li><code>signal</code>: The signal the user wants to send anonymously.</li><li><code>snarkArtifacts</code>: The <code>zkey</code> and <code>wasm</code> <a href="/docs/glossary#trusted-setup-files">trusted setup files</a>.</li></ul><p>In the voting system use case, once all the voters have joined their <a href="/docs/guides/identities#create-an-identity">identities</a> to the ballot <a href="/docs/guides/groups">group</a>,
a voter can generate a proof to vote for a proposal.
In the call to <code>generateProof</code>, the voting system passes the unique ballot ID (the <a href="/docs/glossary#merkle-tree/">Merkle tree</a> root of the group) as the
<code>externalNullifier</code> to prevent the voter signaling more than once for the ballot.
The following code sample shows how to use <code>generateProof</code> to generate the voting proof:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> generateProof </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@semaphore-protocol/proof&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> externalNullifier </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> group</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">root</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> signal </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;proposal_1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> fullProof </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">generateProof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">identity</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> group</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> externalNullifier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> signal</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    zkeyFilePath</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./semaphore.zkey&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    wasmFilePath</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./semaphore.wasm&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="verify-a-proof-off-chain">Verify a proof off-chain<a class="hash-link" href="#verify-a-proof-off-chain" title="Direct link to heading">â€‹</a></h2><p>Use the <a href="https://github.com/semaphore-protocol/semaphore/tree/v2.6.1/packages/proof" target="_blank" rel="noopener noreferrer"><code>@semaphore-protocol/proof</code></a> library to verify a Semaphore proof off-chain.
To verify a proof, pass the following to the <code>verifyProof</code> function:</p><ul><li><em><code>proof</code></em>: the Semaphore proof.</li><li><em><code>verificationKey</code></em>: the JavaScript object in the <code>semaphore.json</code> <a href="/docs/glossary#trusted-setup-files">trusted setup file</a>.</li></ul><p>The following code sample shows how to parse the verification key object from <code>semaphore.json</code>
and verify the previously generated proof:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> verifyProof </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@semaphore-protocol/proof&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> verificationKey </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:rgb(255, 203, 107)">JSON</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">parse</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">readFileSync</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;./semaphore.json&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;utf-8&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">await</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">verifyProof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">verificationKey</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fullProof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// true or false.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><code>verifyProof</code> returns a Promise that resolves to <code>true</code> or <code>false</code>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="verify-a-proof-on-chain">Verify a proof on-chain<a class="hash-link" href="#verify-a-proof-on-chain" title="Direct link to heading">â€‹</a></h2><p>Use the <a href="https://github.com/semaphore-protocol/semaphore/tree/v2.6.1/packages/contracts/contracts/base/SemaphoreCore.sol" target="_blank" rel="noopener noreferrer"><code>SemaphoreCore</code></a> contract to verify proofs on-chain. It uses a verifier deployed to Ethereum and provides methods hash the signal and verify a proof.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>You can import <code>SemaphoreCore</code> and other Semaphore contracts from the <a href="https://github.com/semaphore-protocol/semaphore/tree/v2.6.1/packages/contracts" target="_blank" rel="noopener noreferrer"><code>@semaphore-protocol/contracts</code></a> NPM module.</p></div></div><p>To verify Semaphore proofs in your contract, import <code>SemaphoreCore</code> and pass the following to the <code>_verifyProof</code> internal method:</p><ul><li><em><code>signal</code></em>: The Semaphore signal to prove.</li><li><em><code>root</code></em>: The root of the Merkle tree.</li><li><em><code>nullifierHash</code></em>: a <a href="#retrieve-a-nullifier-hash">nullifier hash</a>.</li><li><em><code>externalNullifier</code></em>: The external nullifier.</li><li><em><code>proof</code></em>: A <a href="#generate-a-solidity-compatible-proof"><em>Solidity-compatible</em> Semaphore proof</a>.</li><li><em><code>verifier</code></em>: The verifier address.</li></ul><p>Remember to save the <code>nullifierHash</code> on-chain to avoid double-signaling.</p><p>Alternatively, you can use an already deployed <a href="https://github.com/semaphore-protocol/semaphore/tree/v2.6.1/packages/contracts/Semaphore.sol" target="_blank" rel="noopener noreferrer"><code>Semaphore</code></a> contract and use its <code>verifiyProof</code> external function.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="generate-a-solidity-compatible-proof">Generate a Solidity-compatible proof<a class="hash-link" href="#generate-a-solidity-compatible-proof" title="Direct link to heading">â€‹</a></h3><p>To transform a proof to be compatible with Solidity contracts, pass the proof to the <code>packToSolidityProof</code> utility function--for example:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token imports"> packToSolidityProof </span><span class="token imports punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">from</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;@semaphore-protocol/proof&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> solidityProof </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">packToSolidityProof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">fullProof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">proof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Semaphore returns a new Solidity-compatible instance of the proof.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="retrieve-a-nullifier-hash">Retrieve a nullifier hash<a class="hash-link" href="#retrieve-a-nullifier-hash" title="Direct link to heading">â€‹</a></h3><p>To get the Semaphore proof nullifier hash, access the proof&#x27;s <code>publicSignals.nullifierHash</code> property--for example:</p><div class="codeBlockContainer_I0IT language-ts theme-code-block"><div class="codeBlockContent_wNvx ts"><pre tabindex="0" class="prism-code language-ts codeBlock_jd64 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> nullifierHash </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> fullProof</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">publicSignals</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/semaphore-protocol/website/edit/main/versioned_docs/version-V2/guides/proofs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/guides/groups"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Groups</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/use-cases/private-voting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Private voting use case</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#generate-a-proof-off-chain" class="table-of-contents__link toc-highlight">Generate a proof off-chain</a></li><li><a href="#verify-a-proof-off-chain" class="table-of-contents__link toc-highlight">Verify a proof off-chain</a></li><li><a href="#verify-a-proof-on-chain" class="table-of-contents__link toc-highlight">Verify a proof on-chain</a><ul><li><a href="#generate-a-solidity-compatible-proof" class="table-of-contents__link toc-highlight">Generate a Solidity-compatible proof</a></li><li><a href="#retrieve-a-nullifier-hash" class="table-of-contents__link toc-highlight">Retrieve a nullifier hash</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid container_yWIM"><div><div><h3>About</h3><p>Semaphore is part of Privacy &amp; Scaling Explorations (PSE), a multidisciplinary team supported by the Ethereum Foundation. PSE explores new use cases for zero knowledge proofs and other cryptographic primitives.</p><a href="https://appliedzkp.org" target="_blank" rel="noopener noreferrer">appliedzkp.org</a></div><div><div><h3>Used by</h3><a href="https://github.com/Unirep" target="_blank" rel="noopener noreferrer">Unirep</a><a href="https://interep.link/" target="_blank" rel="noopener noreferrer">Interep</a></div><div><h3>Learn</h3><a href="https://github.com/semaphore-protocol" target="_blank" rel="noopener noreferrer">Github</a><a target="_blank" href="/docs/introduction">Docs</a></div><div><h3>Connect</h3><a href="https://discord.gg/6mSdGHnstH" target="_blank" rel="noopener noreferrer">Discord</a></div></div></div><hr><div><p>Copyright Â© 2022 Ethereum Foundation</p><a style="margin-right:-8px" class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/semaphore-logo.svg" alt="Semaphore Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/img/semaphore-logo.svg" alt="Semaphore Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div></a></div></div></footer></div>
<script src="/assets/js/runtime~main.b7f259fa.js"></script>
<script src="/assets/js/main.173807db.js"></script>
</body>
</html>